services:
  lok8:
    container_name: lok8
    build:
      context: .
      target: development
    environment:
      NODE_ENV: development
      KUBECONFIG: /.kube/config.yaml
      GLOBAL_MODE: false
    volumes:
      - ./package.json:/usr/app/package.json
      - ./src:/usr/app/src
      - ./.kube/config.yaml:/.kube/config.yaml
    ports:
      - "3001:3001"
      - "9223:9223"
    expose:
      - "9223"
    entrypoint: ["npm", "run", "debug"]
    
